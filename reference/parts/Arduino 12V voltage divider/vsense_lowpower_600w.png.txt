http://www.microbuilder.eu/Tutorials/Fundamentals/MeasuringBatteryVoltage.aspx

This example extends on the basic voltage divider by allowing you to enable or disable the divider with a simple GPIO pin (BATTSENS_EN).  Q1 is a P-Channel MOSFET that will selectively allow the battery current to flow throw the voltage divider and into the ADC.  Q2 is an NPN Transistor that will turn the P-Channel MOSFET (Q1) 'on' or 'off'.  The extra transistor is necessary because the battery voltage may well be above the maximum level that the GPIO pin can handle, which would almost certainly damage the MCU if they were connected directly.  By setting the GPIO line high, the transistor (Q2) will open the flow of current through the MOSFET (Q1), allowing you to safely measure the current battery voltage on the ADC line.  By setting the GPIO line low, you shut off the flow of current to the ADC and the voltage divider and can be certain that you are not needlessly using any of the battery's stored energy.  (Tip: If you don't have an NPN transistor, an N-channel MOSFET could also be used in place of R4 and Q2.)